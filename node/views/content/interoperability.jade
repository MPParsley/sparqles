extends ../layout
block content
      section#post
        article
          header.wrpl
            h1 Interoperability
            time Last update: #{lastUpdate}
            details
              summary Description:
              p
                | The interoperability empirically analyses the SPARQL 1.0 and SPARQL 1.1 features supported by an endpoint.
      .line
      section#posts.default-area
        article.wrp(style='padding-bottom: 1em;')
          .wrplInnerBox(style='height: 100%;width:100%')
            - function numberWithCommas(x) {if (x) return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");}
            div
              b #{parseFloat((epsInter.nbEndpointsSPARQL1/epsInter.nbEndpointsTotal*100).toFixed(2))+ '%'} 
              | (#{epsInter.nbEndpointsSPARQL1}/#{epsInter.nbEndpointsTotal}) of the endpoints are 
              b compliant with some SPARQL 1.0 features
            div
              b #{parseFloat((epsInter.nbEndpointsFullSPARQL1/epsInter.nbEndpointsTotal*100).toFixed(2))+ '%'} 
              | (#{epsInter.nbEndpointsFullSPARQL1}/#{epsInter.nbEndpointsTotal}) of the endpoints are 
              b Fully compliant with some SPARQL 1.0
            div
              b #{parseFloat((epsInter.nbEndpointsSPARQL11/epsInter.nbEndpointsTotal*100).toFixed(2))+ '%'} 
              | (#{epsInter.nbEndpointsSPARQL11}/#{epsInter.nbEndpointsTotal}) of the endpoints are 
              b compliant with some SPARQL 1.1 features
            div
              b #{parseFloat((epsInter.nbEndpointsFullSPARQL11/epsInter.nbEndpointsTotal*100).toFixed(2))+ '%'} 
              | (#{epsInter.nbEndpointsFullSPARQL11}/#{epsInter.nbEndpointsTotal}) of the endpoints are 
              b Fully compliant with some SPARQL 1.1
        article.wrp(style='padding-bottom: 1em;')
          .wrplInnerBox(style='height: 100%;')
            section
              .wrpl(style='padding-left: 2em;')
                img(src='./images/green.png')
                span(style='padding-left: 0.75em;') Compliant with 
                b 100% 
                | of the features
              .wrpl(style='padding-left: 2em;')
                img(src='./images/orange.png')
                span(style='padding-left: 0.75em;') Compliant with 
                b [50%-100%[ 
                |of the features
              .wrpl(style='padding-left: 2em;')
                img(src='./images/red.png')
                span(style='padding-left: 0.75em;') Compliant with 
                b ]0%-50%[ 
                |of the features
              .wrpl(style='padding-left: 2em;')
                img(src='./images/gray.png')
                span(style='padding-left: 0.75em;') Compliant with 
                b 0% 
                | of the features
        article.wrp
          .wrplInnerBox(style='height: 100%;')
            table#table_current.psp-table(cellspacing='0', cellpadding='0', border='0', width='100%')
              thead
                tr
                  th.tablehead(scope='col', width='50%') SPARQL Endpoint
                  th.tablehead(width='25%') SPARQL 1.0 features
                  th.tablehead(width='25%') SPARQL 1.1 features
              tbody
                - each ep, i in epsInter.endpoints
                  tr(class=(i % 2 == 0) ? 'odd' : 'even')
                    //-Display Endpoint Label
                    //-TODO: if more than one endpoint then display how many and their names 
                    if ep.datasets.length>1
                      td
                        a(href="/endpoint?uri=#{ep.uri}") #{ep.uri}
                    else
                      td 
                        a(href="/endpoint?uri=#{ep.uri}") #{ep.datasets[0].label}
                    //-Display SPARQL 1.0 
                    td.tdcenter
                      if ep.nbCompliantSPARQL1Features==epsInter.nbSPARQL1Features
                        img(src='./images/green.png')
                      else
                        if ep.nbCompliantSPARQL1Features>0 && (ep.nbCompliantSPARQL1Features/epsInter.nbSPARQL1Features)<0.5
                          img(src='./images/orange.png')
                        else
                          if ep.nbCompliantSPARQL1Features>0 && (ep.nbCompliantSPARQL1Features/epsInter.nbSPARQL1Features)>=0.5
                            img(src='./images/red.png')
                          else 
                            img(src='./images/gray.png')
                    //-Display SPARQL 1.0 
                    td.tdcenter
                      if ep.nbCompliantSPARQL11Features==epsInter.nbSPARQL11Features
                        img(src='./images/green.png')
                      else
                        if ep.nbCompliantSPARQL11Features>0 && (ep.nbCompliantSPARQL11Features/epsInter.nbSPARQL11Features)<0.5
                          img(src='./images/orange.png')
                        else
                          if ep.nbCompliantSPARQL11Features>0 && (ep.nbCompliantSPARQL11Features/epsInter.nbSPARQL11Features)>=0.5
                            img(src='./images/red.png')
                          else 
                            img(src='./images/gray.png')